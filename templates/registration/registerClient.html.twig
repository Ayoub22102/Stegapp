{% extends 'base.html.twig' %}

{% block title %}Créer compte client{% endblock %}

{% block stylesheets %}
    <!-- Inclure Tailwind CSS via CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.0.0/dist/tailwind.min.css" rel="stylesheet">
{% endblock %}

{% block body %}
<div class="flex justify-center items-center min-h-screen">
    <div class="max-w-[936px] mx-auto">
        <div class="relative flex flex-col text-gray-700 bg-white shadow-md w-96 rounded-xl bg-clip-border">
            <div class="relative grid mx-4 mb-4 -mt-6 overflow-hidden text-white shadow-lg h-24 place-items-center rounded-xl bg-gradient-to-tr from-gray-900 to-gray-800 bg-clip-border shadow-gray-900/20">
                <h3 class="block font-sans text-2xl antialiased font-semibold leading-snug tracking-normal text-white">
                    Créer compte client
                </h3>
            </div>

            <div class="flex flex-col gap-6 p-6">
                {{ form_start(registrationClientForm) }}

                <div class="relative h-11 w-full min-w-[200px] mb-4">
                    {{ form_widget(registrationClientForm.username, {'attr': {
                        'class': 'w-full h-full px-3 py-3 font-sans text-sm font-normal transition-all bg-transparent border rounded-md peer',
                        'placeholder': ' '
                    }}) }}
                    <label class="absolute left-0 -top-1.5">Adresse e-mail</label>
                    {{ form_errors(registrationClientForm.username) }}
                </div>

                <div class="relative h-11 w-full min-w-[200px] mb-4">
                    {{ form_widget(registrationClientForm.nom, {'attr': {
                        'class': 'w-full h-full px-3 py-3 font-sans text-sm font-normal transition-all bg-transparent border rounded-md peer',
                        'placeholder': ' '
                    }}) }}
                    <label class="absolute left-0 -top-1.5">Nom</label>
                    {{ form_errors(registrationClientForm.nom) }}
                </div>

                <div class="relative h-11 w-full min-w-[200px] mb-4">
                    {{ form_widget(registrationClientForm.prenom, {'attr': {
                        'class': 'w-full h-full px-3 py-3 font-sans text-sm font-normal transition-all bg-transparent border rounded-md peer',
                        'placeholder': ' '
                    }}) }}
                    <label class="absolute left-0 -top-1.5">Prénom</label>
                    {{ form_errors(registrationClientForm.prenom) }}
                </div>

                <div class="relative h-11 w-full min-w-[200px] mb-4">
                    {{ form_widget(registrationClientForm.cin, {'attr': {
                        'class': 'w-full h-full px-3 py-3 font-sans text-sm font-normal transition-all bg-transparent border rounded-md peer',
                        'placeholder': ' '
                    }}) }}
                    <label class="absolute left-0 -top-1.5">CIN</label>
                    {{ form_errors(registrationClientForm.cin) }}
                </div>

                <div class="relative h-11 w-full min-w-[200px] mb-4">
                    {{ form_widget(registrationClientForm.telephone, {'attr': {
                        'class': 'w-full h-full px-3 py-3 font-sans text-sm font-normal transition-all bg-transparent border rounded-md peer',
                        'placeholder': ' '
                    }}) }}
                    <label class="absolute left-0 -top-1.5">Téléphone</label>
                    {{ form_errors(registrationClientForm.telephone) }}
                </div>

                <!-- Password fields -->
                <div class="relative h-11 w-full min-w-[200px] mb-4">
                    {{ form_widget(registrationClientForm.plainPassword.first, {'attr': {
                        'class': 'w-full h-full px-3 py-3 font-sans text-sm font-normal transition-all bg-transparent border rounded-md peer',
                        'placeholder': ' '
                    }}) }}
                    <label class="absolute left-0 -top-1.5">Mot de passe</label>
                    {{ form_errors(registrationClientForm.plainPassword.first) }}
                </div>

                <div class="relative h-11 w-full min-w-[200px] mb-4">
                    {{ form_widget(registrationClientForm.plainPassword.second, {'attr': {
                        'class': 'w-full h-full px-3 py-3 font-sans text-sm font-normal transition-all bg-transparent border rounded-md peer',
                        'placeholder': ' '
                    }}) }}
                    <label class="absolute left-0 -top-1.5">Vérification du mot de passe</label>
                    {{ form_errors(registrationClientForm.plainPassword.second) }}
                </div>

                <div class="-ml-2.5">
                    <div class="inline-flex items-center">
                        {{ form_widget(registrationClientForm.agreeTerms, {'attr': {'class': 'mr-2'}}) }}
                        <span class="font-light text-gray-700 cursor-pointer">J'accepte les termes et conditions</span>
                    </div>
                    {{ form_errors(registrationClientForm.agreeTerms) }}
                </div>
            </div>

            <div class="p-6 pt-0">
                <button
                    class="block w-full bg-gradient-to-tr from-gray-900 to-gray-800 py-3 text-white rounded-lg">
                    S'enregistrer
                </button>
                {{ form_end(registrationClientForm) }}
            </div>

            <p class="text-center mt-6">
                Vous avez déjà un compte ?
                <a href="{{ path('app_login') }}" class="font-bold text-blue-500">Connexion</a>
            </p>
        </div>
    </div>
</div>

{% block javascripts %}
<script>
    const passwordInput = document.getElementById('{{ registrationClientForm.plainPassword.first.vars.id }}');
    const confirmPasswordInput = document.getElementById('{{ registrationClientForm.plainPassword.second.vars.id }}');
    const registerButton = document.getElementById('registerButton');

    registerButton.addEventListener('click', function (event) {
        const password = passwordInput.value;
        const confirmPassword = confirmPasswordInput.value;

        if (password !== confirmPassword) {
            event.preventDefault();
            alert('Les mots de passe ne correspondent pas');
        }
    });
</script>
{% endblock %}
{% endblock %}
